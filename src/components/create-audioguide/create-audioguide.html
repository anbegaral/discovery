<ion-header>
    <ion-toolbar>
        <ion-title>Create audioguide</ion-title>
        <ion-buttons start>
        <button ion-button (click)="modalDismiss()">
            <span ion-text color="primary" showWhen="ios">Cancel</span>
            <ion-icon name="md-close" showWhen="android,windows"></ion-icon>
        </button>
        </ion-buttons>
    </ion-toolbar>
</ion-header>
<ion-content>
    <div class ="create-audioguide">
        <form [formGroup]="createAudioguideForm">
        <p>Please select the country and location of your audioguide. If the location is not in the list, create it.
            <locations-dropdown *ngIf="!showInputs" (idLocationEvent)="getLocation($event)" (creatingEvent)="openInput($event)"  (creatingLocationEvent)="creatingLocationEvent($event)" [creating]="true"></locations-dropdown>
            <div *ngIf="showInputs">
                <ion-item>
                    <ion-label>Country</ion-label>
                    <ion-input formControlName="country" type="text" [(ngModel)]="country"></ion-input>
                </ion-item>
                <ion-item *ngIf="!createAudioguideForm.controls.country.valid  && (createAudioguideForm.controls.country.dirty)">
                    <p>Please enter a valid country.</p>
                </ion-item>
                
                <ion-item>
                    <ion-label>Location</ion-label>
                    <ion-input formControlName="location" type="text" [(ngModel)]="location"></ion-input>
                </ion-item>
                <ion-item *ngIf="!createAudioguideForm.controls.location.valid  && (createAudioguideForm.controls.location.dirty)">
                    <p>Please enter a valid location.</p>
                </ion-item>
                <ion-input formControlName="idlocation" type="hidden" [(ngModel)]="idlocation"></ion-input>
            </div>
            <div *ngIf="showLocationInput">
                <ion-item>
                    <ion-label>Location</ion-label>
                    <ion-input formControlName="location" type="text" [(ngModel)]="location"></ion-input>
                </ion-item>
                <ion-item *ngIf="!createAudioguideForm.controls.location.valid  && (createAudioguideForm.controls.location.dirty)">
                    <p>Please enter a valid location.</p>
                </ion-item>
                <ion-input formControlName="idlocation" type="hidden" [(ngModel)]="idlocation"></ion-input>
            </div>
            <ion-item>
                <ion-label>Title</ion-label>
                <ion-input formControlName="title" type="text" [(ngModel)]="title"></ion-input>
            </ion-item>
            <ion-item *ngIf="!createAudioguideForm.controls.title.valid  && (createAudioguideForm.controls.title.dirty)">
                <p>Please enter a valid title.</p>
            </ion-item>        
            <ion-item>
                <ion-label>Description</ion-label>
                <ion-textarea formControlName="description" type="text" [(ngModel)]="description"></ion-textarea>
            </ion-item>
            <ion-item *ngIf="!createAudioguideForm.controls.description.valid  && (createAudioguideForm.controls.description.dirty)">
                <p>Please enter a valid description.</p>
            </ion-item>
            
            <ion-item>
                <ion-label>Price</ion-label>
                <ion-input formControlName="price" type="number" [(ngModel)]="price"></ion-input>
            </ion-item>
            <ion-item *ngIf="!createAudioguideForm.controls.price.valid  && (createAudioguideForm.controls.price.dirty)">
                <p>Please enter a valid price.</p>
            </ion-item>            
            <ion-item>
                <ion-label>Language</ion-label>
                <ion-input formControlName="lang" type="text" [(ngModel)]="lang"></ion-input>
            </ion-item>
            <ion-item *ngIf="!createAudioguideForm.controls.lang.valid  && (createAudioguideForm.controls.lang.dirty)">
                <p>Please enter a valid language.</p>
            </ion-item>
            <ion-item>
                <button ion-button icon-left (click)="takePicture()">
                    <ion-icon name="camera"></ion-icon>
                    Select Image
                </button> {{pictureName}}
            </ion-item>
        </form>
        <button ion-button color="primary" full (click)="createAudioguide()">Create audioguide</button>
    </div>
</ion-content>